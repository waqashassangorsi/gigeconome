<?php include("includes/front_end_header.php");?>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<style type="text/css">

	.row_2
	{
        background-color: black;
        padding-top: 22px!important;
	}

#circle_image{
margin-top: 15px;
}
	#grey_row
	{

margin-top: -46px;
	}

	#heading
	{
		color: #333;
        margin-top: 35px;
        padding-left: 20px;
		
	}
	.user_info h5{
	    padding-left: 20px;
	    font-weight: bold;
	    color: #444;
	}

	.white
	{
      background-color: white;
     }


	.div_white_1
	{
		margin-top: 23px;
		border-radius: 6px;
	}

	.div_white_2
	{
		margin-top: 23px;
		border-radius: 6px;
	}
	#star
	{
    color: rgb(194, 145, 10);
 	}
 	#star_div
 	{
margin-top: -10px
 	}
 	#project
 	{
 		margin-top: 10px;
 	}


#id_container2{
	margin-top: 29px;
	border-radius: 6px;
	box-shadow: 0 0 5px 0px gainsboro;
}

.black
{
	color: black;
}

.portfolio{
padding-bottom: 39px;
}

#padding{
	padding: 36px;
	padding-top: 0px;
	padding-bottom:51px;
}

.padding-top{
	padding-top: 15px;
}


.padding
{
padding: 23px;
}

 	@media (max-width: 576px) {
    .col-xs-3 {
        margin-top:20px;
    
    }
}
.font
{
font-weight: bold;
font-size: 15px;
}

.white_color
{
	color: white;
}

#image
{
    width: 100px;
    height: 100px;
    margin-top: -22px;
    margin-bottom: 18px;
}

#image_padding
{
	padding-left: 22px;
	padding-bottom: 22px;
	padding-right: 22px;
}

#font_2
{
	font-size: 13px;
}

#image_2
{
	width: 58px;
    height: 62px;
}
.star_size
{
	font-size: 15px;
}

.container_2
{
	width: 93%;
	margin: 0 auto;
}

@media (max-width: 672px) {
    #stars {
        margin-top:20px;
    
    }
}

#review_div{
	margin-top: 29px;
}

@media (max-width: 765px) {
    .image_div {
        margin-top:20px;
           }
}

@media (max-width: 765px) {
    #image_margin_top {
        margin-top:20px;
           }
}


@media (max-width: 991px) {
    .image_div {
        margin-top:20px;
           }
}


@media (max-width: 500px) {
    #padding {
        padding:0px;
        	padding-bottom:51px;
           }
}




@media (max-width: 575px) {
      #white_id1
     {
     	height: auto;
     	
     }
}



@media (max-width: 767px) {
      #white_id2
     {
     	height: auto;
     	
     }
}
@media (max-width: 991px) {
    #portolio_heading


}

.white_div_margin
{
    margin-top:-22px;
}

.image_width
{
    width:100%;
    padding-top: 22px;
}



.white_div_margin
{
    margin-top: -20px;
}



.white_div_padding
{
   padding:10px 13px 1px 12px;
}


.white_div2_padding
{
    padding: 8px 10px 1px 8px;
}
.rivew_section ul{
    list-style: none;
}
.rivew_section ul li{
    float: left;
}
.rivew_image{
    margin-left: -40px;
}
.rivew_description{
    margin-left: 20px;
    margin-top: -10px;
}
.rivew_description p{
    width: 60%;
    padding-top: 10px;
}
.review_cont{
    background: #fff;
    margin-top: 10px;
    border-radius: 6px;
    margin-bottom: 10px;
    width: 96%!important;
    box-shadow: 0 0 5px 0px gainsboro;
}

.newcard{
    width: 100%;
    background: #eee;
}

.card_label span {
    color: #fff;
    display: block;
    font-size: 9px;
    padding: 2px 0px;
    background: rgb(255, 115, 0) !important;
    transform: rotate(-45deg);
    position: absolute;
    width: 95px;
    top: 16px;
    left: -30px;
    text-align: center;
}
.newcard{
    position: relative;
    background: white;
    box-shadow: 0 0 3px 0px gray;
    border-radius: 5px;
    margin-bottom: 5px;
    padding: 5px;
}
.newcard:hover {
    
}
.newcard_image img{
    width: 100%;
}
.favoriteIcon i{
    position: absolute;
    top: 5px;
    color: #908b8b!important;
    right: 5px;
    font-size: 15px;
}
.favoriteIcon i:hover{
    color: #f53!important;
}
.card_cont{
    overflow: hidden;
}
.card_content{
    display: flex;
}
.card_text{
    width: 66%;
    border-bottom: 1px dashed gray;
    padding-top: 10px;
    border-right: 1px dashed gray;
}
.card_text a{
    color: #111;
    font-size: 13px;
}
.card_rate{
    border-bottom: 1px dashed gray;
    text-align: center;
    width: 43%;
    padding-top: 22px;
}
.card_rate span{
    color: #009247;
    font-size: 17px;
    font-weight: bold;
}
.newcard_footer{
    display: flex;
    padding-top: 8px;
}
.cardfooter_left{
    width: 50%;
    display: flex;
}
.cardfooter_right{
    width: 50%;
}
.cardfooter_img img{
    width: 38px;
    height: 38px;
    border-radius: 5px;
}
.cardfooter_text{
    padding-left: 5px;
}
.newcard_btn{
    background: #fff !important;
    color: rgb(255, 115, 0) !important;
    border: 1px solid rgb(255, 115, 0) !important;
    padding: 5px 17px;
    border-radius: 5px
}
.newcard_btn:hover{
    background: rgb(255, 115, 0) !important;
    color: #fff!important;
    border: 1px solid rgb(255, 115, 0) !important;;
}
.cardfooter_right h6{
    color: rgb(255, 115, 0) !important;
    font-size: 14px;
}
.hover_text{
    color: #fff;
    background: rgb(17 17 17);
    transition: all 0.35s cubic-bezier(0.28, 0.37, 0, 1.15) 0s;
    opacity: 0;
    display: flex;
    position: absolute;
    top: 17px;
    width: 96%!important;
    height: 147px;
    padding-top: 84px;

}
.hover_text h6{
    color: #fff;
    font-size: 16px;
}
.hover_left{
    width: 50%;
    text-align: center;
}
.hover_right{
    width: 50%;
    text-align: center;
}
.newcard:hover .hover_text{
    opacity:0.6;
}
#services{
    display: none;
}
.endorsement_image img{
    width: 40px;
    margin-top: 7px;
    margin-left: 5px;
}
.endorsement_cont{
    display: flex;
    background: #fff;
    box-shadow: 0 0 3px 0px gray;
    width: 98%;
    margin: auto;
    border-radius: 5px;
    margin-bottom: 5px;
    
}
.endorsement_name{
    padding-left: 8px;
    padding-right: 14px;
}
.tag_show{
    background: #009247;
    padding: 7px;
    border-radius: 5px;
    color: #fff;
}
.modal_image{
    width: 100%;
}


#overlay{
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.8) none 50% / contain no-repeat;
  cursor: pointer;
  transition: 0.3s;
  
  visibility: hidden;
  opacity: 0;
}
#overlay.open {
  visibility: visible;
  opacity: 1;
  z-index: 999;
}

#overlay:after { /* X button icon */
  content: "\2715";
  position: absolute;
  color:#fff;
  top: 10px;
  right:20px;
  font-size: 2em;
}

.background_ul 
 {
 	list-style-type: none;
 	display: inline;
 	background-color: black;
 	color: white;
 	margin: 3px;
 	padding:4px;
 }

#white_div
{
    padding:36px;
    background-color:white;
}


#grey_div
{
    padding:23px;
    background-color:#F3F5F7;
}
#remote_margin
{
    margin-left:-38px;
}

#proposal_margin
{
    margin-left:14px;
}

#number_margin
{
    margin-left:5px;
}

@media screen and (max-width: 764px) and (min-width:340px){
.background_ul {
         padding: 1px;
       }
 .btn{
     padding: 6px 9px;
 }
 
 .total_likes_{
     margin-left: 2px;
 }
 
.servicesrow{
    margin:0px;
} 
}


</style>

<div class="container-fluid">
    <div class="tab_profile">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#reviews" id="reviews_btn">Freelancers</a></li>
            <?php if($this->uri->segment(2) != "showfreelancerontags"){?>
            <li><a data-toggle="tab" href="#services" id="services_btn">Services</a></li>
            <li><a data-toggle="tab" href="#endorsements" id="endorsements_btn">Projects</a></li>
            <?php } ?>
        </ul>
    </div>
    
</div>
<div class="tab-content">
        <?php   
            if(!empty($result)){
        ?>
        <div class="container-fluid review_cont tab-pane fade in active" id="reviews">
        <?php } else{?>
        <div class="container-fluid tab-pane fade in active" id="reviews">
        <?php }?>
        
        <?php 
            
        if(!empty($result)){
            foreach($result as $key=>$value){
        ?>
            	<div class="row" style="padding-top: 15px;">
                    <div class="col-xs-8 col-sm-8">
                   
                        <div class="row">
                     	    <div class="col-xs-3 col-sm-1" id="img_col">
                     		    <img src="<?php echo $value['dp'];?>" class="img-circle" id="image_2">
                     	    </div>
                            <div class="col-xs-9 col-sm-11">
             		            <h4> <a href="<?php echo SURL.'TimeLine/'.$value['username'];?>"><strong><?php echo ucwords($value['f_name']." ".$value['l_name']);?></strong></a></h4>
                     		    <p>
                     		        <?php 
                     		        $rating_Data = $this->common->rating_user($value['u_id']);
                     		        if($rating_Data['totalrating']>=20){
                     		        ?>
                        		    <span class="star"><i class="glyphicon glyphicon-star"></i></span>
                        		    <?php }else{?>
                        		    <span class="star"><i class="glyphicon glyphicon-star-empty"></i></span>
                        		    <?php } ?>
                        		    
                        		    <?php 
                     		        if($rating_Data['totalrating']>=40){
                     		        ?>
                        		    <span class="star"><i class="glyphicon glyphicon-star"></i></span>
                        		    <?php }else{?>
                        		    <span class="star"><i class="glyphicon glyphicon-star-empty"></i></span>
                        		    <?php } ?>
                        		    
                        		    <?php 
                     		        if($rating_Data['totalrating']>=60){
                     		        ?>
                        		    <span class="star"><i class="glyphicon glyphicon-star"></i></span>
                        		    <?php }else{?>
                        		    <span class="star"><i class="glyphicon glyphicon-star-empty"></i></span>
                        		    <?php } ?>
                        		    
                        		    <?php 
                     		        if($rating_Data['totalrating']>=80){
                     		        ?>
                        		    <span class="star"><i class="glyphicon glyphicon-star"></i></span>
                        		    <?php }else{?>
                        		    <span class="star"><i class="glyphicon glyphicon-star-empty"></i></span>
                        		    <?php } ?>
                        		    
                        		    <?php 
                     		        if($rating_Data['totalrating']>=100){
                     		        ?>
                        		    <span class="star"><i class="glyphicon glyphicon-star"></i></span>
                        		    <?php }else{?>
                        		    <span class="star"><i class="glyphicon glyphicon-star-empty"></i></span>
                        		    <?php } ?>
                        		    
                        		    
                        		    
                        		    <span><?php echo intval($rating_Data['totalrating']); ?>%</span>
                        		    <span>(<?php echo intval($rating_Data['votes']);?>)</span>
                        		</p>
                        		<p>
                        			<span class="glyphicon glyphicon-map-marker" style="color:rgb(52, 143, 235)"></span>
                        	        <span><?php echo $value['location'];?>,</span>
                        		</p>
            		
            		            <p>
            		                <?php 
            		                    
            		                    if(!empty($value['tags'])){
            		                        
            		                    $usertags = explode(",",$value['tags']); 
            		                    foreach($usertags as $key=>$tagvalue){
            		                ?>
                        		    <span class="margin_ul background_ul"><?php echo $tagvalue;?></span>
                        		    <?php }} ?>
                        		</p>
                            </div>
                        </div>
        
                    </div>
                    <div class="col-xs-1 text-center col-xs-2">
                         
                        <h5>
                            <?php 
                            
                            
                            if($value['u_id']==$myuser['u_id']){
                              
                                $wishicon = "";
                            }else{
                                $wishicon = "wish_icon";
                            }
                            
                              
                            $is_wished = $this->db->query("select * from users_wishlist where whom_wished='".$value['u_id']."' and u_id='".$myuser['u_id']."'");
                            if($is_wished->num_rows() > 0){
                                
                            ?>
                            <i class="glyphicon glyphicon-heart wishfree <?php echo $wishicon;?>" style="color: red !important;" id="wish_heart_<?php echo $value['u_id'] ?>" data-id="<?php echo $value['u_id'] ?>"></i>
                            <?php }else{?>
                             <i class="glyphicon glyphicon-heart wishfree <?php echo $wishicon;?>" style="color:908b8b !important;" id="wish_heart_<?php echo $value['u_id'] ?>" data-id="<?php echo $value['u_id'] ?>"></i>
                            <?php } ?>
                        </h5>
                         <?php 
                            $total_wishlist = $this->db->query("select count(*) as sum from users_wishlist where whom_wished='".$value['u_id']."'")->result_array()[0]['sum'];
                        ?>
                        <h6 id="total_likes_<?php echo $value['u_id'] ?>"><?php echo $total_wishlist;?></h6>
                    </div>
                    <div class="col-xs-3 col-xs-2 select_padding">
                        
                     	<h3 class="rank_margin">Rank</h3>
                     	<?php 
                     	    $user_badge = $this->common->user_rank($userdata['u_id']);
                     	    if(!empty($user_badge)){
            	        ?>
            	            <img src="<?php echo $user_badge;?>" data-toggle="tooltip" title="Bronze" width='40px' class="img-fluid ring_img">
            	            <?php } ?>
                     	<?php if(!empty($value['hourly_rate'])){?>
                     	<h4 class="hourl_rate">£<?php echo $value['hourly_rate'];  ?></h4>
                     	<?php } ?>
                     		<?php 
                     	    if($this->session->userdata("LoggedIn") == TRUE){
                     	    if($value['u_id']!=$myuser['u_id']){?>
                     	        <button class="btn btn-success button_border" style="margin-bottom:10px;"><a href="<?php echo SURL.'postproject/index/'.$value['username'];?>" style="color:#fff;">Contact</a></button>
                     	
                     	    <?php }} ?>
                    </div>
        
                </div>
                <hr> 
            
        <?php 
            }
        }else{
        
        ?>
            <div class="row">
                <div class="col-sm-12" style="padding: 12px;background: white;">
                    <h2 style="text-align:center">No Record Found.</h2>   
                </div>
            </div>
            
        <?php 
        } 
        ?>
    
    </div>
        
        <?php if($this->uri->segment(2) != "showfreelancerontags"){?>
        
        <div cass="container-fluid  tab-pane fade" id="services">
            <div class="row servicesrow">
                <?php if(!empty($result2)){?>
                <?php 
                    foreach($result2 as $val){
                        $image = $this->db->query("select * from service_portfolio where service_id='".$val['service_id']."' order by id")->result_array()[0]['image'];
                ?>
                <div class="col-md-3 col-sm-4 col-xs-12 " style="padding: 35px">
                    <div class="card_cont">
                        <div class="newcard">
                            <div class="card_label hidden">
                                <span>FEATURED</span>
                            </div>
                            <div class="favoriteIcon">
                                <i class="glyphicon glyphicon-heart" ></i>
                            </div>
                            <div class="newcard_image">
                                <a href="#">
                                    <img src="<?php echo SURL.$image;  ?>"  class="img-fluid" style="height:144px" />
                                </a>
                            </div>
                            <div class="card_content">
                                <div class="card_text">
                                    <a href="<?php echo SURL.'Buy/index/'.$val['service_id'];?>"><?php echo $val['title'];?></a>
                                </div>
                                <div class="card_rate">
                                    <span>£<?php echo $val["amount"]?></span>
                                </div>
                            </div>
                            <div class="newcard_footer">
                                <div class="cardfooter_left">
                                    <div class="cardfooter_img">
                                        <img src="<?php echo $val['dp'] ?>" class="img-fluid" />
                                    </div>
                                    <div class="cardfooter_text">
                                        <h6 style="color:#000;font-weight:bold;"><?php echo $val['f_name'];?></h6>
                                        <h6 style="color:#555;font-weight:bold;"><?php echo $val['location'];?></h6>
                                    </div>
                                </div>
                                <div class="cardfooter_right text-right">
                                    <a href="<?php echo SURL.'Buy/index/'.$val['service_id'] ?>" class="newcard_btn" >VIEW</a>
                                </div>
                            </div>
                            <?php 
                                $ratingquery = $this->db->query("select count(*) as total,sum(stars) as stars from service_rating where service_id='".$val['service_id']."'")->result_array()[0];
                                $totalrating = $ratingquery['stars']*100/($ratingquery['total']*5);
                                
                            ?>
                            <div class="hover_text">
                                <div class="hover_left">
                                    <i class="fa fa-star-o fa-2x" aria-hidden="true"></i>
                                    <h6>Rating: <?php echo intval($totalrating);?>%</h6>
                                </div>
                                <?php 
                                $sold = $this->db->query("select count(*) as count from services_purchased where service_id='".$val['service_id']."'")->result_array()[0]['count'];
                                ?>
                                <div class="hover_right">
                                    <i class="fa fa-archive fa-2x" aria-hidden="true"></i>
                                    <h6>Sold: <?php echo $sold;?></h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <?php }}else{ ?>
                   
                   <div class="col-sm-12" style="padding: 12px;background: white;">
                    <h2 style="text-align:center">No Record Found.</h2>   
                   </div>
                    
                    <?php } ?>
            </div>
    </div>
        <div class="container-fluid  tab-pane fade d-none" id="endorsements">
            <?php 
                if(!empty($jobs)){
                    $i=0;
                    foreach($jobs as $key=>$value){
                      if($i % 2==0){
                          $clasname = "grey_div";
                      }else{
                          $clasname = "white_div";
                      }
                      
                      $no_of_proposal = $this->db->query("select count(DISTINCT(send_id)) as count from jobs_msgs where job_id='".$value['job_id']."' and custom_status='Proposal' and custom_status_extent in(0,1,2)")->result_array()[0]['count'];
                	 
            ?>
            
            <div class="row" id="<?php echo $clasname; ?>">
            	<div class="col-xs-9 col-sm-10 float-left grey_div stars">
            	    <div class="col-xs-10 col-sm-6">
            	        <h4>
            	            <strong><a href="<?php echo SURL.'Jobdetails/index/'.$value['job_slug'];?>"><?php echo $value['job_title'];?></a></strong>
            	            <?php if($value['u_id']==$myuser['u_id']){?>
            	            <a href="javascript:void(0)" class="dlt_job" data-id1="<?php echo $value['job_id'];?>"><span class="glyphicon glyphicon-trash"></span></a>
            	            <?php }?>
            	        </h4>
            	        <h5 class="text-light">
            	            <?php 
            	                echo $this->check->timeAgo(strtotime($this->Common->gettimeinmyzone(($value['date']))));
            	                
            	            
            	            ?></h5>
            	        <ul style="list-style: none;display: flex;">
                	     <li class="text-success" id="remote_margin"><?php echo $value['job_location'];?></li>
                	     <li class="text-success" id="proposal_margin">No of Proposals</li>
                	     <li id="number_margin" style="color:black"><?php echo intval($no_of_proposal);?></li>
                	     <li>
                	         
                	         <?php 
                	          $loginuserid=$this->session->userdata('user');
                	            $is_wishlist = $this->db->query("select * from jobs_wishlist where job_id='".$value['job_id']."' and u_id='".$loginuserid."'"); 
                	            if($is_wishlist->num_rows() > 0){
                	         ?>
                	         
                	         <i class="fav_icon_job glyphicon glyphicon-heart heart hidden" style="color:rgb(255, 0, 0)!important;" data-id1="<?php echo $value['job_id'];?>" id="total_wishlist_<?php echo $value['job_id'];?>"></i>
                	         <?php }else{?>
                	         <i class="fav_icon_job glyphicon glyphicon-heart heart hidden" style="color:rgb(0, 196, 207) !important;" data-id1="<?php echo $value['job_id'];?>" id="total_wishlist_<?php echo $value['job_id'];?>"></i>
                	         <?php } ?>
                	     </li>
                	     
                	     <input type="hidden" value="<?php echo $loginuserid?>" class="userlike">
                	     
                	    </ul>
                    </div>
                    <?php 
                    $job_type = $this->db->query("select * from jobs_type where job_id='".$value['job_id']."'")->result_array();
                    if($job_type){
                    ?>
                    <div class="job_buttons">
                        <?php 
                            foreach($job_type as $key=>$jobtypevalue){
                                if($jobtypevalue['type']=="Urgent"){
                        ?>
                                    <button class="urgent_btn" disabled>Urgent</button>
                                <?php }else if($jobtypevalue['type']=="Featured"){ ?>
                                    <button class="featured_btn" disabled>Featured</button>
                                <?php }else if($jobtypevalue['type']=="Highly Paid"){?>
                                    <button class="highly_btn" disabled>Highly</button>
                                <?php } ?>
                                
                            <?php } ?>    
                    </div>
                    <?php } ?>
        	    </div>
        	
        		<div class="col-xs-3 col-sm-2 float-left text_center stars">
        		    <div class="row">
        			<div class="col-xs-12 col-sm-12 text-center">
        				<h4 class="text-info"><strong>£<?php echo $value['budget']; ?></strong></h4>
        				</div>
        			</div>
        			<?php 
        			    if($myuser['user_status']=="User"){
            			    if($value['u_id']!=$myuser['u_id']){
            			        $is_proposal_Sent = $this->db->query("select * from jobs_msgs where custom_status='Proposal' and job_id='".$value['job_id']."' and custom_status_extent='0' and send_id='".$myuser['u_id']."'");
        			        
        			?>
        			<div class="row">
        			    <?php if($is_proposal_Sent->num_rows() > 0){?>
        			    <!--<a href="javascript:void(0)" class="btn btn-default" style="border: 1px solid black;color: black;">Proposal Sent</a>-->
        			    <?php }else{?>
        			    <!--<a href="<?php echo SURL.'Jobdetails/index/'.$value['job_slug'];?>" class="btn btn-success" style="color:#fff;">Send proposal</a>-->
        			    <?php } ?>
        			</div>
        			<?php }} ?>
        		</div>
            </div>
            <?php $i++; }} ?>
        </div>
        
        <?php } ?>
    </div>
    


    
    

</div>
<script>
    $(document).ready(function(){
        $('#reviews_btn').click(function(){
            $('#reviews').show();
            $('#services').hide();
            ('#endorsements').hide();
        });
        $('#services_btn').click(function(){
            $('#reviews').hide();
            $('#services').show();
            ('#endorsements').hide();
        });
        $('#endorsements_btn').click(function(){
            $('#reviews').hide();
            $('#services').hide();
            ('#endorsements').show();
        });
    });
</script>

<?php include("includes/front_end_footer.php");?>
<!-- Image Modal  -->
<div class="modal fade bottom" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">

  <!-- Add .modal-dialog-centered to .modal-dialog to vertically center the modal -->
  <div class="modal-dialog modal-dialog-bottom" role="document">


    <div class="modal-content">
      <div class="modal-body">
        <img src="uploads/cyber23_thumb.jpg"  class="img-fluid modal_image" />
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <?php $get_id = $_GET['get_id'];echo $get_id; ?>
      </div>
    </div>
  </div>
</div>


<script>
    $('.yes_img').on('click', function() {
  $('#overlay')
    .css({backgroundImage: `url(${this.src})`})
    .addClass('open')
    .one('click', function() { $(this).removeClass('open'); });
});
</script>

